@model Wilderness.Game.Web.Models.PlayViewModel
@{
    ViewBag.Title = "Play";
}

<h2>Play</h2>

<div id="gameDisplay"></div>

<div class="container">
  <ul id="discussion"></ul>
</div>

@section scripts {
  <!--Script references. -->
  <!--The jQuery library is required and is referenced by default in _Layout.cshtml. -->
  <!--Reference the SignalR library. -->
  <script src="~/Scripts/jquery.signalR-2.2.1.min.js"></script>

  <!--Reference the autogenerated SignalR hub script. -->
  <script src="@Model.SignalRHubUrl"></script>

  <script src="~/Elfisk/pixi.min.js"></script>

  <script src="~/Elfisk/viewportManager.js"></script>
  <script src="~/Elfisk/spriteManager.js"></script>
  <script src="~/Elfisk/messageHandlers.js"></script>
  <script src="~/Elfisk/game.js"></script>

  <script>
    var rootUrl = "@Model.RootUrl";

    var images =
      [
        {
          url: rootUrl + "game/images/bear.png",
          frames :
            [
              { name: "B", box: [0, 0, 32, 32] }
            ]
        },
        {
          url: rootUrl + "game/tiles/tiles1.bmp",
          frames:
            [
              { name: "T1", box: [0, 0, 32, 32] },
              { name: "T2", box: [32, 0, 32, 32] },
              { name: "T3", box: [64, 0, 32, 32] },
              { name: "T4", box: [96, 0, 32, 32] }
            ]
        },
      ]

    Elfisk.SpriteManager.registerImages(images);

    function runGame() {
      Elfisk.Game.runGameLoop();
    }

    Elfisk.Game.initialize(
      {
        rootUrl: rootUrl,
        signalRUrl: "@Model.SignalRUrl",
        viewElement: '#gameDisplay',
        onReady: runGame
      });
  </script>

}

